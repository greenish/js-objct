/*! 
 * objectfactory - v1.0.0 (https://github.com/greenish/js-objectfactory)
 * 
 * Copyright (c) 2013 Philipp Adrian (www.philippadrian.com)
 *
 * The MIT Licence (http://opensource.org/licenses/MIT)
 */////////////////////////////////////////////////////////////////////////////////
(function(e){"use strict";var t=/xyz/.test(function(){xyz})?/\bthis\._super\b/:/.*/,n=/xyz/.test(function(){xyz})?/\bFunction\b/:/.*/,r=function(){},i={_deep:!1,_abstract:!1,_super:!1},s=Array.toString(),o=Array.isArray||function(e){return},u=function(e,t){var n={unexpected:"Unexpected '"+t+"'! Only 'functions' and 'objects' can be used with the objectfactory.",unexpectedArray:"Unexpected 'array'! Arrays are only allowed as first parameter to set options and must only contain strings. ['deep', 'super', 'abstract']","abstract":"Abstract method '"+t+"' needs to be defined."};throw"objectfactory: "+n[e]},a=function(e,n){return typeof e!="function"||!t.test(e)?e:function(){var t=this._super;this._super=n;var r=e.apply(this,arguments);this._super=t;return r}},f=function(e,t){var n,r,i;for(var s=0;s<t.length;s++)try{n=e;r=t[s].split(".");for(var o=0;o<r.length-1;o++)n=n[r[o]];i=n[r[r.length-1]];if(typeof i!="function"||i===Function)throw""}catch(a){u("abstract",t[s]+"()")}},l=function(e,t,n,r,s,o){n=n||i;if(typeof s=="object")for(var u in s)c(e,t,s[u],n,r,o);else for(var u in t)c(e,t,u,n,r,o);return e},c=function(t,n,r,i,s,u){var f;u=u||"";if(i._deep&&typeof n[r]=="object"){f=o(n[r])?[]:{};t[r]=l(f,n[r],i,s,e,u+r+".")}else if(i._abstract&&n[r]===Function){s.push(u+r);typeof t[r]!="function"&&(t[r]=n[r])}else i._super&&n[r]!==t[r]?t[r]=a(n[r],t[r]):t[r]=n[r]},h=function(e,t){var n;if(typeof e=="function")if(v.debug&&typeof Function.prototype.bind=="function"){Array.prototype.unshift.call(t,null);n=new(Function.prototype.bind.apply(e,t))}else{r.prototype=e.prototype;r.prototype.constructor=e;n=new r;e.apply(n,t)}else{r.prototype=e;n=new r}return n},p=function(r,i,s,o){var u=i.obj.prototype,a=i._super&&t.test(i.obj),f=i._abstract&&n.test(i.obj),c,p;r=l(r,u,i,o);if(!v.debug&&!a&&!f&&!i._deep){i.obj.apply(r,s);return r}i.obj.prototype=r;i.obj.prototype.constructor=i.obj;c=h(i.obj,s);i.obj.prototype=u;i.obj.prototype.constructor=i.obj;if(a||f||i._deep){v.debug&&(r=h(r));p=typeof Object.getOwnPropertyNames=="function"?Object.getOwnPropertyNames(c):e;c=l(r,c,i,o,p)}return c},d=function(e,t,n,r){var i,s;for(var o=0;o<t.length;o++){s=t[o];i=typeof s.obj=="function";if(i&&s.strObj===m)e=s.obj.call(v,e,n,r,s);else{v.debug&&(e=h(e));e=i?p(e,s,n,r):l(e,s.obj,s,r)}}return e},v=function(){var e=h(i),t=[],n=typeof arguments[0],s=1,a=function(n,r,i,s){if(this===v){s._instanceof=c;return d(n,t,r,i)}var i=[],o={"instanceof":c},u=d(o,t,arguments,i),a,l,h,p;f(u,i);u.construct&&(a=u.construct.apply(u,arguments));l=typeof a;return l==="object"||l==="function"?a:u},c=function(e){if(typeof e=="function"&&this instanceof e)return!0;if(a===e)return!0;for(var n=0;n<t.length;n++){if(t[n].strObj===m&&t[n]._instanceof(e))return!0;if(t[n].obj===e)return!0}return!1};if(o(arguments[0]))for(var p=0;p<arguments[0].length;p++)typeof arguments[0][p]=="string"?typeof e["_"+arguments[0][p]]=="boolean"&&(e["_"+arguments[0][p]]=!0):u("unexpectedArray");else n==="string"&&typeof e["_"+arguments[0]]=="boolean"?e["_"+arguments[0]]=!0:n==="boolean"?e._deep=arguments[0]:s=0;for(;s<arguments.length;s++){n=typeof arguments[s];if(n==="object"||n==="function")if(!o(arguments[s])){t.push(l(h(e),{obj:arguments[s],strObj:n==="function"?""+arguments[s]:"",_instanceof:r}));n==="function"&&l(a,arguments[s],{_deep:e._deep,_super:e._super,_abstract:!1})}else u("unexpectedArray");else u("unexpected",n)}return a};v.debug=!1;var m=""+v();typeof module=="object"?module.exports=v:window.objectfactory=v})();