/*! 
 * objectfactory - v1 (https://github.com/greenish/js-objectfactory)
 * 
 * Copyright (c) 2013 Philipp Adrian (www.philippadrian.com)
 *
 * The MIT Licence (http://opensource.org/licenses/MIT)
 */
!function(t){"use strict";var e=/xyz/.test(function(){})?/\bthis\._super\b/:/.*/,n=/xyz/.test(function(){})?/\bFunction\b/:/.*/,o=function(){},r={_deep:!1,_abstract:!1,_super:!1},u=(Array.toString(),Array.isArray||function(t){}),c=function(t,e){var n={unexpected:"Unexpected '"+e+"'! Only 'functions' and 'objects' can be used with the objectfactory.",unexpectedArray:"Unexpected 'array'! Arrays are only allowed as first parameter to set options and must only contain strings. ['deep', 'super', 'abstract']","abstract":"Abstract method '"+e+"' needs to be defined."};throw"objectfactory: "+n[t]},a=function(t,n){return"function"==typeof t&&e.test(t)?function(){var e=this._super;this._super=n;var o=t.apply(this,arguments);return this._super=e,o}:t},f=function(t,e){for(var n,o,r,u=0;u<e.length;u++)try{n=t,o=e[u].split(".");for(var a=0;a<o.length-1;a++)n=n[o[a]];if(r=n[o[o.length-1]],"function"!=typeof r||r===Function)throw""}catch(f){c("abstract",e[u]+"()")}},s=function(t,e,n,o,u,c){if(n=n||r,"object"==typeof u)for(var a in u)p(t,e,u[a],n,o,c);else for(var a in e)p(t,e,a,n,o,c);return t},p=function(e,n,o,r,c,f){if("instanceof"!==o||""+n[o]!==l){var p;f=f||"",r._deep&&"object"==typeof n[o]?(p=u(n[o])?[]:{},e[o]=s(p,n[o],r,c,t,f+o+".")):r._abstract&&n[o]===Function?(c.push(f+o),"function"!=typeof e[o]&&(e[o]=n[o])):e[o]=r._super&&n[o]!==e[o]?a(n[o],e[o]):n[o]}},i=function(t,e){var n;return"function"==typeof t?d.debug&&"function"==typeof Function.prototype.bind?(Array.prototype.unshift.call(e,null),n=new(Function.prototype.bind.apply(t,e))):(o.prototype=t.prototype,o.prototype.constructor=t,n=new o,t.apply(n,e)):(o.prototype=t,n=new o),n},b=function(o,r,u,c){var a,f,p=r.obj.prototype,b=r._super&&e.test(r.obj),y=r._abstract&&n.test(r.obj);return o=s(o,p,r,c),d.debug||b||y||r._deep?(r.obj.prototype=o,r.obj.prototype.constructor=r.obj,a=i(r.obj,u),r.obj.prototype=p,r.obj.prototype.constructor=r.obj,(b||y||r._deep)&&(d.debug&&(o=i(o)),f="function"==typeof Object.getOwnPropertyNames?Object.getOwnPropertyNames(a):t,a=s(o,a,r,c,f)),a):(r.obj.apply(o,u),o)},y=function(t,e,n,o){for(var r,u,c=0;c<e.length;c++)u=e[c],r="function"==typeof u.obj,r&&u.strObj===j?t=u.obj.call(d,t,n,o,u):(d.debug&&(t=i(t)),t=r?b(t,u,n,o):s(t,u.obj,u,o));return t},d=function(){var t=i(r),e=[],n=typeof arguments[0],a=1,p=function(t,n,o,r){if(this===d)return r._instanceof=b,y(t,e,n,o);var u,c,o=[],a={"instanceof":b},s=y(a,e,arguments,o);return f(s,o),"function"==typeof s.construct&&(u=s.construct.apply(s,arguments)),c=typeof u,"object"===c||"function"===c?u:s},b=function(t){if(p===t)return!0;if(this===t)return!0;for(var n=0;n<e.length;n++){if(e[n].strObj===j&&e[n]._instanceof(t))return!0;if(e[n].obj===t)return!0;if("object"==typeof e[n].obj&&"function"==typeof e[n].obj.instanceof&&""+e[n].obj.instanceof===l&&e[n].obj.instanceof(t))return!0}return!1};if(u(arguments[0]))for(var g=0;g<arguments[0].length;g++)"string"==typeof arguments[0][g]?"boolean"==typeof t["_"+arguments[0][g]]&&(t["_"+arguments[0][g]]=!0):c("unexpectedArray");else"string"===n&&"boolean"==typeof t["_"+arguments[0]]?t["_"+arguments[0]]=!0:"boolean"===n?t._deep=arguments[0]:a=0;for(;a<arguments.length;a++)n=typeof arguments[a],"object"===n||"function"===n?u(arguments[a])?c("unexpectedArray"):(e.push(s(i(t),{obj:arguments[a],strObj:"function"===n?""+arguments[a]:"",_instanceof:o})),"function"===n&&s(p,arguments[a],{_deep:t._deep,_super:t._super,_abstract:!1})):c("unexpected",n);return p};d.debug=!1;var g=d(),j=""+g,l=""+g().instanceof;"function"==typeof define&&"function"==typeof require?define(function(){return d}):"object"==typeof window?window.objectfactory=d:"object"==typeof module&&(module.exports=d)}();