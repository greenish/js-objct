/*! 
 * objectfactory - v1.x (https://github.com/greenish/js-objectfactory)
 * 
 * Copyright (c) 2013 Philipp Adrian (www.philippadrian.com)
 *
 * The MIT Licence (http://opensource.org/licenses/MIT)
 */
!function(t,e){"use strict";var o=/xyz/.test(function(){})?/\bthis\._super\b/:/.*/,n=/xyz/.test(function(){})?/\bFunction\b/:/.*/,r=function(){},p={_deep:!1,_abstract:!1,_super:!1},i=Array.toString(),f=Array.isArray||function(t){return"object"==typeof t&&"[object Array]"===Object.prototype.toString.call(t)||"constructor"in t&&String(t.constructor)===i},s=function(t,e){var o=["Unexpected '"+e+"'! Only 'functions' and 'objects' can be used with the objectfactory.","Unexpected 'array'! Arrays are only allowed as first parameter to set options and must only contain strings. ['deep', 'super', 'abstract']","Abstract method '"+e+"' needs to be defined."];throw"objectfactory: "+o[t]},u=function(t,e){return typeof t===v&&o.test(t)?function(){var o="_super"in this,n=this._super;this._super=e;var r=t.apply(this,arguments);return o?this._super=n:delete this._super,r}:t},c=function(t,e){for(var o,n,r,p=0;p<e.length;p++)try{o=t,n=e[p].split(".");for(var i=0;i<n.length-1;i++)o=o[n[i]];if(r=o[n[n.length-1]],typeof r!==v||r===Function)throw""}catch(f){s(2,e[p]+"()")}},a=function(t,e,o,n,r,i){o=o||p;var s;if(f(e))for(s=0;s<e.length;s++)y(t,e,s,o,n,i);else if("object"==typeof r)for(s in r)y(t,e,r[s],o,n,i);else for(s in e)y(t,e,s,o,n,i);return t},y=function(t,o,n,r,p,i){if("instanceof"!==n||""+o[n]!==g){var s;i=i||"",r._deep&&"object"==typeof o[n]?(s=f(o[n])?[]:{},t[n]=a(s,o[n],r,p,e,i+n+".")):r._abstract&&o[n]===Function?(p.push(i+n),typeof t[n]!==v&&(t[n]=o[n])):t[n]=r._super&&o[n]!==t[n]?u(o[n],t[n]):o[n]}},b=function(t,e){var o;return typeof t===v?j.debug&&typeof Function.prototype.bind===v?(e=Array.prototype.slice.call(e,0),e.unshift(null),o=new(Function.prototype.bind.apply(t,e))):(r.prototype=t.prototype,o=new r,r.prototype={},t.apply(o,e)):(r.prototype=t,o=new r,r.prototype={}),o},l=function(t,r,p,i){var f,s,u=r.obj.prototype,c=r._super&&o.test(r.obj),y=r._abstract&&n.test(r.obj);return t=a(t,u,r,i),j.debug||c||y||r._deep?(r.obj.prototype=t,f=b(r.obj,p),r.obj.prototype=u,(c||y||r._deep)&&(j.debug&&(t=b(t)),s=typeof Object.getOwnPropertyNames===v?Object.getOwnPropertyNames(f):e,f=a(t,f,r,i,s)),f):(r.obj.apply(t,p),t)},d=function(t,e,o,n){for(var r,p,i=0;i<e.length;i++)p=e[i],r=typeof p.obj===v,r&&p.strObj===h?t=p.obj.call(j,t,o,n,p):(j.debug&&(t=b(t)),t=r?l(t,p,o,n):a(t,p.obj,p,n));return t},j=function(){var t=b(p),e=[],o=arguments,n=typeof o[0],i=1,u=function(t,o,n,r){if(this===j)return r._instanceof=y,d(t,e,o,n);n=[];var p,i,f={"instanceof":y},s=d(f,e,arguments,n);return c(s,n),typeof s.construct===v&&(p=s.construct.apply(s,arguments)),i=typeof p,"object"===i||i===v?p:s},y=function(t){if(u===t)return!0;if(this===t)return!0;for(var o=0;o<e.length;o++){if(e[o].strObj===h&&e[o]._instanceof(t))return!0;if(e[o].obj===t)return!0;if("object"==typeof e[o].obj&&typeof e[o].obj.instanceof===v&&""+e[o].obj.instanceof===g&&e[o].obj.instanceof(t))return!0}return!1};if(f(o[0]))for(var l=0;l<o[0].length;l++)"string"==typeof o[0][l]?"boolean"==typeof t["_"+o[0][l]]?t["_"+o[0][l]]=!0:s(1):o[0][l]===!0?t._deep=!0:s(1);else"string"===n&&"boolean"==typeof t["_"+o[0]]?t["_"+o[0]]=!0:"boolean"===n?t._deep=o[0]:i=0;for(;i<o.length;i++)n=typeof o[i],"object"===n||n===v?f(o[i])?s(1):(e.push(a(b(t),{obj:o[i],strObj:n===v?""+o[i]:"",_instanceof:r})),n===v&&a(u,o[i],{_deep:t._deep,_super:t._super,_abstract:!1})):s(0,n);return u};j.debug=!1;var _=new j,h=""+_,g=""+_().instanceof,v="function";t.exports=j,typeof define===v&&typeof require===v?define(function(){return j}):"object"==typeof window&&(window.objectfactory=j)}("undefined"==typeof module?{}:module);